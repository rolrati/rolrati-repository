<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/masterLayout.xhtml"
	xmlns:sec="http://www.springframework.org/security/tags">

	<ui:define name="head-extra">
	</ui:define>

	<ui:define name="content">
		<p:growl autoUpdate="true" showSummary="false" />
		<h:body>
			<h:form id="form">
				<p:panel
					style="display: block;width: 1142px;min-height: 900px; margin: 0px auto; background-color: #f5f5f0">

					<p:panel
						style="width: 230; min-height: 840; float: right; margin-top: 30px; background-color: #f5f5f0; border: none">
						<h:panelGrid columns="1"
							style="display: block; margin: 0px auto; margin-top: 250px;">
							<p:commandButton id="kuld" value="Küld" style="width: 100px"
								update="form"
								disabled="#{issuemanagementController.toUser == null}"
								actionListener="#{issuemanagementController.getTextValue}"
								icon="ui-icon-disk" onsuccess="PF('editorWidget').clear();" />

							<p:commandButton id="elvet" value="Elvet" type="button"
								style="width: 100px" onclick="PF('editorWidget').clear();"
								icon="ui-icon-close" />
						</h:panelGrid>
					</p:panel>

					<p:panel
						style="width: 230; min-height: 640; float: left; margin-top: 135px; background-color: #f5f5f0; border: none">
						<p:fieldset legend="Elérhető" toggleable="true" toggleSpeed="500"
							collapsed="true" style="color: blue">
							<p:ajax event="toggle"
								listener="#{issuemanagementController.initOrderList}"
								update="form" />

							<p:dataTable value="#{issuemanagementController.users}"
								var="user" id="table" styleClass="borderless" scrollable="true"
								scrollHeight="267" selectionMode="single"
								selection="#{issuemanagementController.toUser}"
								rowKey="#{user.id}">
								<p:ajax event="rowSelect" update=":form:kuld" />
								<p:column>
									<h:outputText value=" #{user.username}" />
								</p:column>
							</p:dataTable>
						</p:fieldset>
					</p:panel>

					<p:panel
						style="display: block; margin: 0px auto; border: none; background-color: #f5f5f0; width: 650px">

						<h1 align="center">Kapcsolatfelvétel</h1>
						<h5 align="center" style="color: blue">
							Segítségre van szükséged?<br /> Valamilyen észrevételed van a
							weboldallal kapcsolatba?<br /> Írj nekünk! Kérdéseitekre
							készséggel válaszolunk!
						</h5>
						<p:editor id="editor" widgetVar="editorWidget"
							value="#{issuemanagementController.text}" height="300">
						</p:editor>

						<p:dataTable scrollable="true" scrollHeight="300"
							selection="#{issuemanagementController.selectedMessage}"
							style="display: block; margin: 0px auto; width: 645px; height: 300px; margin-top: 50px"
							emptyMessage="Jelenleg nincs egyetlen üzenet sem!"
							value="#{issuemanagementController.sended}" var="sm">
							<p:column headerText="Címzett">
								<h:outputText value=" #{sm.recipient.username}" />
							</p:column>
						</p:dataTable>

					</p:panel>
				</p:panel>
			</h:form>
		</h:body>
	</ui:define>
</ui:composition>